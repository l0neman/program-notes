- [初始化](#初始化)
- [文件更改](#文件更改)
- [仓库状态](#仓库状态)
- [版本控制](#版本控制)
- [分支管理](#分支管理)
- [现场保存](#现场保存)
- [标签使用](#标签使用)
- [远程库](#远程库)
- [忽略规则](#忽略规则)

# Git 常用命令

## 初始化

- 首次安装后设置名字和 email 地址。

```git
git config --global user.name "YourName"

git config --global user.email "email@example.com"
```

- 创建 ssh Key。

```git
ssh-keygen -t rsa -C "email@example.com"
```

- 进入目录并初始化为 git 仓库。

```git
git init
```

## 文件更改

- 放弃文件在工作区的修改。

```git
git checkout -- <文件>
```

- 添加文件到暂存区。

```git
git add <文件/路径名>
```
- 撤销存放到暂存区的文件。

```git
git reset HEAD <文件/路径名>
```

- 查看文件修改部分。

```git
git diff HEAD -- <文件/路径名>
```

- 提交文件至仓库。

```git
1. 提交并添加注释。
git commit -m "注释"
```

```git
2. 修改最近的提交注释。
git commit -amend
```

- 删除并添加到缓存区。

```git
git rm <文件名>
```

## 仓库状态

- 查看当前仓库状态。

```git
git status
```

- 查看提交日志。

```git
git log [--pretty=oneline] (参数为简化为单行显示)
```

- 查看命令执行历史记录。

```git
git reflog
```

## 版本控制

- 回退版本,  ^ 表示回退到上一个版本， ^^ 表示上上一个，以此类推。

```git
git reset --hard HEAD^
```

## 分支管理

- 创建并切换到目标分支。

```git
git checkout -b <分支>
```

- 切换到目标分支。

```git
git branch <分支>
```

- 查看分支。

```git
git branch
```

- 查看分支合并图

```git
git log --graph
```

- 整理分支提交历史为直线。

```git
git rebase
```

- 合并目标分支到当前分支，相当于指针直接指向目标分支。

```git
git merge <分支>
```

- 合并目标分支到当前分支
并禁用 `Fast forward` 模式（非指针指向，而是提交和目标分支同样的内容）。

```git
git merge --no-ff -m "合并注释" <分支>
```

- 删除目标分支。

```git
git branch -d <分支>
```

## 现场保存

- 保存当前工作现场。

```git
git stash
```

- 查看保存的 stash。

```git
git stash list
```

- 恢复同时删除 stash 内容。

```git
git stash pop
```

- 恢复 stash 内容。

```git
git stash apply <stash id>
```

- 删除 stash 内容。

```git
git stash drop
```

## 标签使用

- 为当前提交创建标签。

```git
git tag <标签>
```

- 为目标提交记录（通过指定 commit id）创建标签。

```git
1. 为 id 是 <commit id> 的提交记录创建标签。
git tag <标签> <commit id>
```


```git
2. 创建标签的同时附加注释。
git tag -a <标签> -m "标签注释" <commit id>
```

- 列出所有 tag。

```git
git tag
```

- 查看目标 tag 详情。

```git
git show <标签>
```

- 删除标签。

```git
git tag -d <标签>
```

- 推送标签至远程库

```git
1. 推送标签 myTag 至远程库。
git push origin <标签>
```

```git
2. 推送所有标签至远程库。
git push origin --tags
```

- 从远程库删除标签。

```git
1. 先从本地删除。
git tag -d <标签>

2. 然后从远程库删除。
git push origin :refs/tags/<标签>
```

## 远程库

- 添加本地库到远程库。

```git
git remote add origin <远程库地址>
```

- 首次推送到远程库。

```git
git push -u origin <分支名>
```

- 推送到远程库。

```git
git push origin <分支名>
```

- 克隆远程库到本地。

```git
git clone <远程库地址>
```

## 忽略规则

GitHub 提供：[https://github.com/github/gitignore](https://github.com/github/gitignore)

- Android

```gitignore
# Built application files
*.apk
*.ap_
*.aab

# Files for the ART/Dalvik VM
*.dex

# Java class files
*.class

# Generated files
bin/
gen/
out/
release/

# Gradle files
.gradle/
build/

# Local configuration file (sdk path, etc)
local.properties

# Proguard folder generated by Eclipse
proguard/

# Log Files
*.log

# Android Studio Navigation editor temp files
.navigation/

# Android Studio captures folder
captures/

# IntelliJ
*.iml
.idea/workspace.xml
.idea/tasks.xml
.idea/gradle.xml
.idea/assetWizardSettings.xml
.idea/dictionaries
.idea/libraries
# Android Studio 3 in .gitignore file.
.idea/caches
.idea/modules.xml
# Comment next line if keeping position of elements in Navigation Editor is relevant for you
.idea/navEditor.xml

# Keystore files
# Uncomment the following lines if you do not want to check your keystore files in.
#*.jks
#*.keystore

# External native build folder generated in Android Studio 2.2 and later
.externalNativeBuild

# Google Services (e.g. APIs or Firebase)
# google-services.json

# Freeline
freeline.py
freeline/
freeline_project_description.json

# fastlane
fastlane/report.xml
fastlane/Preview.html
fastlane/screenshots
fastlane/test_output
fastlane/readme.md

# Version control
vcs.xml

# lint
lint/intermediates/
lint/generated/
lint/outputs/
lint/tmp/
# lint/reports/
```
